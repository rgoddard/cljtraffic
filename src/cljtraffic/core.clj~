(ns cljtraffic.core (:gen-class))

(defn -main [& args]
  (println (str "Available Processors: " (.availableProcessors (Runtime/getRuntime)))))

(defstruct vehicle :vel :pref-vel)
(defstruct cell :car)

(defn create-lane [length]
  (apply vector (map (fn [_] (ref (struct cell))) (range length))))

(def lane-length 10)
(def lane (create-lane lane-length))

(defn update-velocity [car]
  (assoc car :vel 1))

(defn update-position [pos car]
  (+ pos (:vel car)))

